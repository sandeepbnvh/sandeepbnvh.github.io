sap.ui.define(["sap/m/library","sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/MessageBox","sap/m/MessageToast","sap/ui/core/Fragment","sap/ui/core/util/File","sap/ui/core/BusyIndicator"],function(e,t,o,s,i,n,a){var d=e.URLHelper;"use strict";return t.extend("com.san.portfoli.controller.App",{onInit:function(){this.getView().setBusy(true);var e=new o;e.loadData(sap.ui.require.toUrl("com/san/portfoli/card.json"));this.getView().setModel(e,"manifests");this.byId("idTimeline").setEnableScroll(false);this.getView().setBusy(false)},showBusyIndicator:function(e,t){a.show(t);if(e&&e>0){if(this._sTimeoutId){clearTimeout(this._sTimeoutId);this._sTimeoutId=null}this._sTimeoutId=setTimeout(function(){this.hideBusyIndicator()}.bind(this),e)}},busy:function(){this.showBusyIndicator(4e3,0)},initializeForm:function(){var e=this.getView().byId("name");e.setValue("");var t=this.getView().byId("email");t.setValue("");var o=this.getView().byId("message");o.setValue("")},downloadResume:function(){const e="https://firebasestorage.googleapis.com/v0/b/portfolio-7b056.appspot.com/o/Sandeep%20A%20N_Resume-converted.pdf?alt=media&token=487486a2-3b22-4a31-a675-a6b622422c18";var t=new XMLHttpRequest;t.open("GET","https://cors-anywhere.herokuapp.com/"+e);t.responseType="blob";t.onload=function(){var e=document.createElement("a");e.href=window.URL.createObjectURL(t.response);e.style.display="none";e.download=sFilenameFromServer;document.body.appendChild(e);e.click();document.body.removeChild(e);setTimeout(function(){window.URL.revokeObjectURL(e.href)},250)}.bind(this);t.send()},handlePopoverPress:function(e){var t=e.getSource(),o=this.getView();if(!this._pPopover){this._pPopover=n.load({id:o.getId(),name:"com.san.portfoli.fragment.detail",controller:this}).then(function(e){o.addDependent(e);return e})}this._pPopover.then(function(e){e.openBy(t)})},onSave:function(){var e=this.getView().byId("name").getValue();var t=this.getView().byId("email").getValue();var o=this.getView().byId("message").getValue();var s=this.getView().byId("phNum").getValue();var n=/^\w+[\w-+\.]*\@\w+([-\.]\w+)*\.[a-zA-Z]{2,}$/;var a=/^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,5})|(\(?\d{2,6}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/;if(e==""||t==""||s==""){i.show("Please enter Valid Details")}else if(!n.test(t)){i.show(t+" is not a valid email address")}else if(!a.test(s)){i.show(s+" is not a valid Phone Number")}else{var d=this.byId("BusyDialog");d.open();Email.send({SecureToken:"41f3b9f9-dfd0-4acd-8e47-4d82d5c96692",To:"sandeep.bnvh@gmail.com",From:"sandeep.bnvh2@gmail.com",Subject:e+" "+" sent a message -- Portfolio!!!",Body:"From Email :"+t+" Phone Number:"+s+"Message :"+o}).then(n=>{if(n=="OK"){var a=firebase.database().ref("messages");var r=a.push();r.set({name:e,email:t,msg:o,phone:s});d.close();i.show("Submitted Successfully")}else{d.close();i.show(t+" is not a valid email address")}});this.byId("mypopover").close()}},handleCloseButton:function(e){this.byId("mypopover").close()},onLinkedIn:function(){window.open("https://www.linkedin.com/in/sandeepbnvh/")},ongithub:function(){window.open("https://github.com/sandeepbnvh")},onInstagram:function(){window.open("https://instagram.com/sandeep.a.n")},onMail:function(){sap.m.URLHelper.triggerEmail("sandeep.bnvh@gmail.com","Say Hi","")}})});